---
import DashboardLayout from '../layouts/DashboardLayout.astro';
---

<DashboardLayout titulo="Registro Premium">
  <div class="max-w-4xl mx-auto space-y-8 py-8">
    <!-- Encabezado -->
    <section class="text-center">
      <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">Accede a contenido exclusivo sobre Mérida</h1>
      <p class="text-xl text-gray-600 max-w-3xl mx-auto">Suscríbete a nuestro plan Premium y disfruta de reportajes especiales, análisis en profundidad y contenido exclusivo sobre Mérida y Yucatán.</p>
    </section>

    <!-- Planes de suscripción -->
    <section class="grid grid-cols-1 md:grid-cols-2 gap-8">
      <!-- Plan Mensual -->
      <div class="bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-200 transition-transform duration-300 hover:scale-[1.02]">
        <div class="p-8">
          <h2 class="text-2xl font-bold text-gray-900 mb-4">Plan Mensual</h2>
          <div class="flex items-baseline mb-6">
            <span class="text-5xl font-extrabold text-gray-900">$99</span>
            <span class="text-xl text-gray-500 ml-2">/mes</span>
          </div>
          <ul class="space-y-4 mb-8">
            <li class="flex items-start">
              <svg class="h-6 w-6 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg>
              <span>Acceso ilimitado a todas las noticias</span>
            </li>
            <li class="flex items-start">
              <svg class="h-6 w-6 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg>
              <span>Reportajes exclusivos y análisis en profundidad</span>
            </li>
            <li class="flex items-start">
              <svg class="h-6 w-6 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg>
              <span>Sin publicidad</span>
            </li>
            <li class="flex items-start">
              <svg class="h-6 w-6 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg>
              <span>Cancelación en cualquier momento</span>
            </li>
          </ul>
          <button id="suscripcionMensual" class="w-full py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg transition-colors duration-300">
            Suscribirme Ahora
          </button>
        </div>
      </div>

      <!-- Plan Anual -->
      <div class="bg-gradient-to-br from-amber-50 to-amber-100 rounded-2xl shadow-lg overflow-hidden border border-amber-200 transition-transform duration-300 hover:scale-[1.02] relative">
        <div class="absolute top-4 right-4 bg-amber-500 text-white text-xs font-bold px-3 py-1 rounded-full">
          AHORRA 20%
        </div>
        <div class="p-8">
          <h2 class="text-2xl font-bold text-gray-900 mb-4">Plan Anual</h2>
          <div class="flex items-baseline mb-6">
            <span class="text-5xl font-extrabold text-gray-900">$949</span>
            <span class="text-xl text-gray-500 ml-2">/año</span>
          </div>
          <ul class="space-y-4 mb-8">
            <li class="flex items-start">
              <svg class="h-6 w-6 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg>
              <span>Todo lo incluido en el plan mensual</span>
            </li>
            <li class="flex items-start">
              <svg class="h-6 w-6 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg>
              <span>Acceso a eventos exclusivos en Mérida</span>
            </li>
            <li class="flex items-start">
              <svg class="h-6 w-6 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg>
              <span>Descuentos en comercios locales asociados</span>
            </li>
            <li class="flex items-start">
              <svg class="h-6 w-6 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg>
              <span>Boletín semanal exclusivo</span>
            </li>
          </ul>
          <button id="suscripcionAnual" class="w-full py-3 px-4 bg-amber-600 hover:bg-amber-700 text-white font-bold rounded-lg transition-colors duration-300">
            Suscribirme y Ahorrar
          </button>
        </div>
      </div>
    </section>

    <!-- Formulario de Registro -->
    <section class="bg-white rounded-2xl shadow-lg overflow-hidden">
      <div class="p-6 border-b border-gray-200">
        <h2 class="text-xl font-bold text-gray-900">Completa tu Registro Premium</h2>
      </div>
      <div class="p-6">
        <form id="registroPremiumForm" class="space-y-6">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <label for="nombre" class="block text-sm font-medium text-gray-700 mb-1">Nombre completo</label>
              <input 
                type="text" 
                id="nombre" 
                name="nombre" 
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                required
              />
            </div>
            <div>
              <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Correo electrónico</label>
              <input 
                type="email" 
                id="email" 
                name="email" 
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                required
              />
            </div>
            <div>
              <label for="telefono" class="block text-sm font-medium text-gray-700 mb-1">Teléfono</label>
              <input 
                type="tel" 
                id="telefono" 
                name="telefono" 
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              />
            </div>
            <div>
              <label for="ciudad" class="block text-sm font-medium text-gray-700 mb-1">Ciudad</label>
              <input 
                type="text" 
                id="ciudad" 
                name="ciudad" 
                value="Mérida"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              />
            </div>
            <div>
              <label for="password" class="block text-sm font-medium text-gray-700 mb-1">Contraseña</label>
              <input 
                type="password" 
                id="password" 
                name="password" 
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                required
              />
            </div>
            <div>
              <label for="confirmPassword" class="block text-sm font-medium text-gray-700 mb-1">Confirmar contraseña</label>
              <input 
                type="password" 
                id="confirmPassword" 
                name="confirmPassword" 
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                required
              />
            </div>
          </div>

          <div>
            <label for="planSeleccionado" class="block text-sm font-medium text-gray-700 mb-1">Plan seleccionado</label>
            <select 
              id="planSeleccionado" 
              name="planSeleccionado" 
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              required
            >
              <option value="">Selecciona un plan</option>
              <option value="mensual">Plan Mensual - $99/mes</option>
              <option value="anual">Plan Anual - $949/año (ahorra 20%)</option>
            </select>
          </div>

          <div>
            <label for="metodoPago" class="block text-sm font-medium text-gray-700 mb-1">Método de pago</label>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
              <div class="border border-gray-300 rounded-lg p-4 flex items-center space-x-3 cursor-pointer hover:border-blue-500 transition-colors">
                <input type="radio" id="tarjeta" name="metodoPago" value="tarjeta" checked />
                <label for="tarjeta" class="cursor-pointer">Tarjeta de crédito</label>
              </div>
              <div class="border border-gray-300 rounded-lg p-4 flex items-center space-x-3 cursor-pointer hover:border-blue-500 transition-colors">
                <input type="radio" id="paypal" name="metodoPago" value="paypal" />
                <label for="paypal" class="cursor-pointer">PayPal</label>
              </div>
              <div class="border border-gray-300 rounded-lg p-4 flex items-center space-x-3 cursor-pointer hover:border-blue-500 transition-colors">
                <input type="radio" id="transferencia" name="metodoPago" value="transferencia" />
                <label for="transferencia" class="cursor-pointer">Transferencia bancaria</label>
              </div>
            </div>
          </div>

          <div class="flex items-start">
            <input 
              type="checkbox" 
              id="terminos" 
              name="terminos" 
              class="mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
              required
            />
            <label for="terminos" class="ml-2 block text-sm text-gray-700">
              Acepto los <a href="#" class="text-blue-600 hover:underline">términos y condiciones</a> y la <a href="#" class="text-blue-600 hover:underline">política de privacidad</a>
            </label>
          </div>

          <button type="submit" class="w-full py-3 px-4 bg-amber-600 hover:bg-amber-700 text-white font-bold rounded-lg transition-colors duration-300">
            Completar Suscripción
          </button>
        </form>
      </div>
    </section>

    <!-- Testimonios -->
    <section class="bg-white rounded-2xl shadow-lg overflow-hidden">
      <div class="p-6 border-b border-gray-200">
        <h2 class="text-xl font-bold text-gray-900">Lo que dicen nuestros suscriptores</h2>
      </div>
      <div class="p-6">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <!-- Testimonio 1 -->
          <div class="bg-gray-50 p-6 rounded-xl">
            <div class="flex items-center mb-4">
              <img class="h-12 w-12 rounded-full object-cover mr-4" src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" alt="Usuario" />
              <div>
                <p class="font-semibold text-gray-900">María Castillo</p>
                <p class="text-sm text-gray-500">Suscriptora desde hace 1 año</p>
              </div>
            </div>
            <p class="text-gray-600 italic">
              "La suscripción premium me ha permitido estar mejor informada sobre lo que sucede en mi ciudad. Los reportajes exclusivos son de gran calidad y me encanta no tener que lidiar con publicidad."
            </p>
          </div>
          
          <!-- Testimonio 2 -->
          <div class="bg-gray-50 p-6 rounded-xl">
            <div class="flex items-center mb-4">
              <img class="h-12 w-12 rounded-full object-cover mr-4" src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" alt="Usuario" />
              <div>
                <p class="font-semibold text-gray-900">Roberto Méndez</p>
                <p class="text-sm text-gray-500">Suscriptor desde hace 6 meses</p>
              </div>
            </div>
            <p class="text-gray-600 italic">
              "Vale cada peso. Los análisis en profundidad sobre el desarrollo urbano de Mérida me han ayudado a tomar mejores decisiones para mi negocio inmobiliario."
            </p>
          </div>
          
          <!-- Testimonio 3 -->
          <div class="bg-gray-50 p-6 rounded-xl">
            <div class="flex items-center mb-4">
              <img class="h-12 w-12 rounded-full object-cover mr-4" src="https://images.unsplash.com/photo-1534528741775-53994a69daeb?ixlib=rb-1.2.1&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" alt="Usuario" />
              <div>
                <p class="font-semibold text-gray-900">Laura Jiménez</p>
                <p class="text-sm text-gray-500">Suscriptora desde hace 3 meses</p>
              </div>
            </div>
            <p class="text-gray-600 italic">
              "Como recién llegada a Mérida, la suscripción premium me ha ayudado a conocer mejor la ciudad, su cultura y sus tradiciones. Recomendado al 100%."
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ -->
    <section class="bg-white rounded-2xl shadow-lg overflow-hidden">
      <div class="p-6 border-b border-gray-200">
        <h2 class="text-xl font-bold text-gray-900">Preguntas Frecuentes</h2>
      </div>
      <div class="p-6">
        <div class="space-y-6">
          <div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">¿Puedo cancelar mi suscripción en cualquier momento?</h3>
            <p class="text-gray-600">Sí, puedes cancelar tu suscripción en cualquier momento desde tu perfil. No hay permanencia mínima ni penalizaciones por cancelación.</p>
          </div>
          <div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">¿Qué métodos de pago aceptan?</h3>
            <p class="text-gray-600">Aceptamos tarjetas de crédito/débito, PayPal y transferencias bancarias para tu comodidad.</p>
          </div>
          <div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">¿Puedo compartir mi cuenta con familiares?</h3>
            <p class="text-gray-600">Cada suscripción permite el acceso desde hasta 2 dispositivos simultáneamente, ideal para compartir con un familiar directo.</p>
          </div>
          <div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">¿Cómo accedo al contenido premium?</h3>
            <p class="text-gray-600">Una vez completada tu suscripción, podrás acceder a todo el contenido premium iniciando sesión con tu correo y contraseña en cualquier dispositivo.</p>
          </div>
          <div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">¿Ofrecen algún periodo de prueba?</h3>
            <p class="text-gray-600">Actualmente ofrecemos un periodo de prueba de 7 días para nuevos suscriptores. Puedes cancelar en cualquier momento durante este periodo sin cargo alguno.</p>
          </div>
        </div>
      </div>
    </section>
  </div>
</DashboardLayout>

<script>
  // Verificar autenticación
  const token = localStorage.getItem('token');
  if (!token) {
    window.location.href = '/login';
  }

  // Funcionalidad para los botones de suscripción
  document.addEventListener('DOMContentLoaded', () => {
    const suscripcionMensual = document.getElementById('suscripcionMensual');
    const suscripcionAnual = document.getElementById('suscripcionAnual');
    const planSeleccionadoElement = document.getElementById('planSeleccionado');
    
    if (suscripcionMensual && planSeleccionadoElement instanceof HTMLSelectElement) {
      suscripcionMensual.addEventListener('click', () => {
        planSeleccionadoElement.value = 'mensual';
        // Desplazar a la sección del formulario
        const formElement = document.getElementById('registroPremiumForm');
        if (formElement) {
          formElement.scrollIntoView({ behavior: 'smooth' });
        }
      });
    }
    
    if (suscripcionAnual && planSeleccionadoElement instanceof HTMLSelectElement) {
      suscripcionAnual.addEventListener('click', () => {
        planSeleccionadoElement.value = 'anual';
        // Desplazar a la sección del formulario
        const formElement = document.getElementById('registroPremiumForm');
        if (formElement) {
          formElement.scrollIntoView({ behavior: 'smooth' });
        }
      });
    }
    
    // Validación del formulario
    const registroPremiumForm = document.getElementById('registroPremiumForm');
    if (registroPremiumForm) {
      registroPremiumForm.addEventListener('submit', (e) => {
        e.preventDefault();
        
        const passwordElement = document.getElementById('password');
        const confirmPasswordElement = document.getElementById('confirmPassword');
        
        if (passwordElement instanceof HTMLInputElement && confirmPasswordElement instanceof HTMLInputElement) {
          const password = passwordElement.value;
          const confirmPassword = confirmPasswordElement.value;
          
          if (password !== confirmPassword) {
            alert('Las contraseñas no coinciden. Por favor, verifica.');
            return;
          }
        }
        
        // Aquí iría la lógica para procesar el formulario
        alert('¡Gracias por suscribirte! En un entorno real, aquí se procesaría tu suscripción.');
        
        // Redireccionar al dashboard
        // window.location.href = '/dashboard';
      });
    }
    
    // Mejorar la experiencia de selección de método de pago
    const metodoPagoOptions = document.querySelectorAll('[name="metodoPago"]');
    metodoPagoOptions.forEach(option => {
      const parent = option.parentElement;
      if (parent) {
        parent.addEventListener('click', () => {
          if (option instanceof HTMLInputElement) {
            option.checked = true;
          }
        });
      }
    });
  });
</script>

